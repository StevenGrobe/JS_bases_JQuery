# La manipulation du DOM avec jQuery.

NB. jQuery est de moins en moins utilis√© dans les nouveaux projets web, au profit de frameworks Javascript, ou tout simplement de l'utilisation de Vanilla Javascript. N√©anmoins, de nombreuses entreprises utilisent encore jQuery dans leurs projets, ce pourquoi il est important d'y consacrer quelques jours d'apprentissage.

## Exercice 1 : Au commencement

Rendez-vous √† l'int√©rieur du r√©pertoire exo-1.

1. En haut du fichier `script.js`, √©crivez un commentaire qui explique la diff√©rence entre Javascript et jQuery (c'est fondamental de comprendre avant d'aller plus loin !). Pour vous aider, cette [vid√©o](http://learn.onemonth.com/jquery-vs-javascript/) est tr√®s bien.
2. Pour pouvoir utiliser jQuery nous devons l'ajouter en tant que librarie externe dans notre application. Ajouter donc une balise `script` qui permet d'inclure jQuery. O√π placer vous cette balise script par rapport √† la balise existante `<script src="script.js"></script>` et pourquoi ?
3. V√©rifier que vous avez bien ajout√© la librarie en ins√©rant le code ci-dessous et assurez-vous que le message s'affiche dans la console de votre navigateur.

```
$(document).ready(function(){
	console.log('Je peux maintenant √©crire du code jQuery');
});
```

4. Expliquer (avec un commentaire) les lignes de code ci-dessus.
5. En quoi cette ligne est indispensable ?
6. Quel symbole permet de rep√©rer dans un programme Javascript que du jQuery est utilis√© ? (attention, ce n'est pas toujours le cas...)

## Exercice 2 : Je s√©lectionne, tu s√©lectionnes, il s√©lectionne, nous s√©lectionnons...

JQuery nous sert √† manipuler des √©l√©ments de la page HTML : les modifier, en ajouter, en supprimer, faire des animations.
Afin de faire une op√©ration sur un √©l√©ment, nous devons √™tre en capacit√© de dire en Javascript comment le s√©lectionner : c'est le but des s√©lecteurs.

1. Il existe trois principaux types de s√©lecteurs en jQuery, lesquels ?
2. Dans le r√©pertoire exo-2, vous trouverez une page HTML qui utilise la librairie Bootstrap. Dans le fichier `script.js`, √©crivez des s√©lecteurs permettant de s√©lectionner les √©l√©ments suivants (un s√©lecteur par ligne) : Par exemple, si je dis s√©lectionner tous les √©l√©ments `h4` de la page, le s√©lecteur associ√© est : `$('h4')`.
   1. S√©lectionner le titre du blog : "John's Blog".
   2. S√©lectionner tous les √©l√©ments du sidemenu de gauche.
   3. S√©lectionner le footer.
   4. S√©lectionner l'√©l√©ment qui permet de faire la barre de recherche.
   5. S√©lectionner tous les glyphicons de la page.
   6. S√©lectionner tous les labels verts.
   7. S√©lectionner tous les paragraphes qui ont comme classe 'intro'.
   8. S√©lectionner toutes les images avec toutes les icones dont la classe est 'glyphicon-time'
   9. S√©lectionner le premier √©l√©ment du sidemenu.
   10. Bonus : s√©lectionner un paragraphe sur deux.

## Exercice 3 : Manipulation

Une fois un √©l√©ment s√©lectionn√©, on veut pouvoir faire des op√©rations sur celui-ci, par exemple :

- changer le texte du paragraphe si on a s√©lectionn√© un paragraphe ;
- changer la couleur de la div s√©lectionn√©e ;
- ajouter une div apr√®s l'√©l√©ment s√©lectionn√© ;
- supprimer un √©l√©ment ;
- cacher l'√©l√©ment.

Commencez par r√©aliser les cours de Khan Academy : 
- ['Acc√®s au DOM avec jQuery'](https://fr.khanacademy.org/computing/computer-programming/html-js-jquery/jquery-dom-access/pt/finding-elements-with-jquery) 
- ['Modification du DOM avec jQuery'](https://fr.khanacademy.org/computing/computer-programming/html-js-jquery/dom-modification-with-jquery/pt/modifying-elements-with-jquery) 
*Ces cours sont accessibles sans cr√©er de compte sur la plateforme.*

L'objectif de l'exercice est d'utiliser uniquement du code JavaScript pour faire les modifications. Autrement dit, interdiction de modifier le fichier index.html (√ßa serait un peu trop facile...)

Le r√©pertoire 3 pr√©sente une page de site d'un portfolio. Ce portfolio est tr√®s g√©n√©rique et nous allons utiliser jQuery pour le personnaliser :

1. changez le titre "My portfolio" par votre pr√©nom ;
2. changez aussi le texte 'Some text that represents "Me"...' par une tagline vous repr√©sentant ;
3. votre portfolio ne comprendra qu'une page : supprimez la navigation de la navbar mais laissez le bouton Login ;
4. changez l'icone de ce bouton d'ailleurs, elle n'est pas tr√®s jolie, choisissez-en une dans la [liste possible de bootstrap](https://icons.getbootstrap.com/) (n'utilisez pas npm pour les installer, mais le cdn disponible en bas de page);
5. changez votre footer en mettant **Copyright 2021** ( respecter le gras );
6. modifiez le texte des paragraphes de la premi√®re ligne d'images. Tous les textes "Some text..." doivent √™tre remplac√©s par "Mon projet" ;
   _Bonus_ : ajouter le num√©ro du projet c'est-√†-dire 'Mon projet 1', 'Mon projet 2'...
7. choisissez une image sur internet et changez toutes les images du projet par cette image. _Bonus_ : personnalisez chacune des images ;
8. vous venez de r√©aliser un nouveau projet et vous souhaitez le mettre sur votre portfolio. De plus, comme c'est le dernier, vous souhaitez qu'il apparaisse au-dessus des autres et qu'il soit plus grand pour √™tre mis en valeur. Choisissez une image et un texte et ajoutez-le au-dessous de "Some of my work". Ajustez la taille de l'image pour √™tre de 250px de haut ;
9. la classe intro a √©t√© d√©finie dans le fichier 'index.css'. Ajoutez cette classe au footer afin de changer l'affichage en rouge.

## Exercice 4 : Actions ‚û°Ô∏è R√©actions

Maintenant que nous savons s√©lectionner et manipuler le DOM, il nous reste un √©l√©ment fondamental √† voir : comment r√©agir √† des √©v√©nements utilisateurs ? Par exemple :

- l'utilisateur a cliqu√© sur le bouton connexion ;
- l'utilisateur est en train de taper un texte dans un input ;
- la souris de l'utilisateur est en train de rentrer dans la div d'id 'toto' ;
- l'utilisateur est en train de redimensionner la fen√™tre.

Commencez par r√©aliser le cours ['√âv√©nements du DOM avec jQuery'](https://fr.khanacademy.org/computing/computer-programming/html-js-jquery/dom-events-with-jquery/pt/adding-event-listeners-with-jquery) de Khan Academy. *Ce cours est accessible sans cr√©er de compte sur la plateforme.*

Notre site est un site d'e-commerce, nous alons vouloir r√©agir √† certains √©v√©nements de l'utilisateur sur cette page, nous allons le faire √† l'aide de jQuery :

1. si l'utilisateur clique sur le bouton 'signup' alors lancer une alerte pour lui dire : "Merci nous vous tiendrons inform√© des diff√©rentes offres" ;
2. r√©cup√©rer maintenant le contenu de l'input pour adapter votre message : "Merci `adresse email rentr√©e`, nous vous tiendrons inform√© des diff√©rentes offres" ;
3. si l'utilisateur double clique sur l'onglet 'Produits' alors cacher l'onglet 'Produits' ;
4. si l'utilisateur clique sur une image alors changer le bouton 'Cart' en haut √† droite pour marquer le fait qu'un produit a √©t√© ajout√© au panier. S'il clique deux fois on doit avoir le texte Cart(2) ;
5. un site ecommerce traque la position de la souris pour savoir si vous √™tes int√©r√©ss√©s par un produit. Affichez dans la console 'L'utilisateur regarde ' + le nom du produit si la souris est au-dessus d'une image de produit. Vous pouvez ajouter des ids sur les images dans la page HTML. _Bonus_ : faire de m√™me sans utiliser les ids ;
6. maintenant, traquer si un utilisateur est en train de remplir le champ pour la newsletter. Comment r√©cup√©rer le fait que l'utilisateur vient de cliquer dans le champ pour rentrer son adresse et comment r√©cup√©rer le fait que l'utilisateur a tap√© quelque chose dedans ? ;
7. _Bonus ++_ : r√©cup√©rer le nombre de produits que l'utilisateur a achet√©s. Par exemple si l'utilisateur clique sur l'image ipad alors 'Cart' doit √™tre remplac√© par 'Cart(25)' puisque l'offre correspond √† 25 ipads...

## Exercice 5 : Pierre, feuille, ciseau avec une interface graphique

Pr√©c√©demment, nous avons r√©alis√© un programme permettant de jouer √† ce fameux jeu.
L'objectif de cette partie est de faire une interface graphique web permettant √† l'utilisateur de faire son choix.

Dans l'id√©al, il ne faudra pas modifier le code pr√©c√©demment √©crit, l'objectif √©tant de s√©parer la partie Vue de la partie Logique (apr√®s tout, on pourra vous demander de faire une nouvelle interface graphique sur t√©l√©phone par exemple et la logique restera la m√™me) :

1. Trouvez sur internet trois images : une de pierre, une de feuille et l'autre de ciseaux ;
2. Cr√©ez dans votre page HTML une section qui contient ces trois images sur une m√™me ligne ;
3. L'utilisateur va cliquer sur une image afin de faire son choix. En utilisant des s√©lecteurs jQuery, faites-en sorte que lorsque l'utilisateur clique sur une image, son choix s'affiche dans la console ;
4. Maintenant cr√©ez une div avec l'id userChoice, et remplacez le contenu de cette div par le choix de l'utilisateur ;
5. Cr√©ez une div avec l'id computerChoice et y mettre dedans le choix de l'ordinateur que vous avez obtenu suite √† l'appel de la fonction getComputerChoice cr√©√©e dans le cours pr√©c√©dent ;
6. Ajoutez une div pour afficher le r√©sultat, le texte doit √™tre vert si vous avez gagn√©, gris en cas d'√©galit√© et rouge si vous avez perdu.

Bonus : essayez de recr√©er (√† votre sauce !) l'interface de [cette page web](https://www.handcramp.lol/) avec le nombre de rounds, le calcul du score, etc.

## Exercice 6 : Un cas tr√®s classique en web : contr√¥ler les donn√©es d'un formulaire

‚ö†Ô∏èNous allons voir dans cet exercice un contr√¥le c√¥t√© navigateur des donn√©es du formulaire. Il doit n√©anmoins **toujours** y avoir un contr√¥le c√¥t√© serveur (m√™me s'il ne sera pas √©voqu√© dans ce projet), car le Javascript peut facilement √™tre d√©sactiv√© (et les contr√¥les devenir donc inefficaces).

1. cr√©ez un formulaire en HTML avec un champ pour un email et un champ pour un mot de passe. Ajouter un bouton avec le titre **'Se connecter'** ;
2. nous voulons contr√¥ler les donn√©es lorsque l'utilisateur clique sur le bouton 'Se connecter'. Faites en sorte de r√©agir √† cet √©v√©nement en utilisant un `alert()` dans un premier temps ;
3. nous devons maintenant r√©cup√©rer les valeurs des champs email et mot de passe dans la fonction d√©clench√©e par l'√©v√©nement (et donc appel√©e) d√©clar√©e √† la question pr√©c√©dente. Ecrivez du code jQuery permettant de r√©cup√©rer la valeur de ces inputs. Affichez ces valeurs dans la console dans un premier temps.

Nous allons maintenant ajouter des contr√¥les :

1. v√©rifiez que le champ email est non vide. Si ce n'est pas le cas, afficher une div avec les classes bootstrap [`alert alert-warning`](https://www.w3schools.com/bootstrap/bootstrap_alerts.asp) en pr√©cisant dedans le texte email obligatoire
2. v√©rifiez la m√™me chose pour le champ mot de passe
3. ajoutez un contr√¥le suppl√©mentaire sur le champ mot de passe pour obliger l'utilisateur √† rentrer au minimum 6 lettres. Ajustez le message en fonction
4. v√©rifiez maintenant que le champ email comporte bien une adresse email, sinon afficher un message √† l'utilisateur. Remarque : il va falloir trouver comment v√©rifier qu'une chaine de charact√®res est un email... le moteur de recherche est votre ami...
5. Maintenant faites en sorte que si l'utilisateur rentre 'hello@me.com' dans l'email et 'secret8' dans le mot de passe alors un message de confirmation apparait : **'Vous √™tes connect√©'**

## Exercice 7 : Afficher des donn√©es sous format JSON.

Il est tr√®s courant en web de demander √† un serveur distant des donn√©es afin de les afficher dans le navigateur. Pensez √† LinkedIn, lorsque vous arrivez sur votre fil d'actualit√© : LinkedIn a √©crit du Javascript pour demander √† ses serveurs de leur renvoyer tous les posts de votre fil d'actualit√©. Ensuite gr√¢ce √† jQuery et Javascript, LinkedIn parcourt la liste des posts et les ajoutent un √† un dans votre page web. Ces donn√©es, lorsqu'elles sont re√ßues, sont g√©n√©ralement format√©es en [JSON](https://en.wikipedia.org/wiki/JSON), un standard.

Dans cet exercice, nous allons r√©cup√©rer des donn√©es et les afficher dans notre page web. Nous ne verrons pas la partie requ√™te √† un serveur qui est un peu complexe et aborde la notion d'asynchrone que nous gardons au chaud pour plus tard (rassurez-vous quand-m√™me, vous en faites d√©j√† sans le savoir üòâ).

Dans le r√©pertoire exo-7, vous trouverez un fichier DATA.js contenant un bien joli tableau avec 1000 √©l√©ments, il s'agit de donn√©es typiques d'un site contenant des informations sur des utilisateurs.

Dans le fichier script.js, vous avez une fonction getData qui vous retourne le tableau de donn√©es, notre objectif va √™tre d'afficher ces donn√©es dans une [table HTML](https://www.w3schools.com/bootstrap/bootstrap_tables.asp) :

1. cr√©ez un tableau HTML avec pour colonne email, nom, pr√©nom, num√©ro de t√©l√©phone ;
2. cr√©ez une fonction addLineToTable qui prend en param√®tre un objet et dont l'objectif est d'ajouter une ligne √† notre tableau avec jQuery. La m√©thode [append](http://api.jquery.com/append/) de jQuery devrait vous aider ;
3. parcourir le tableau des donn√©es et pour chaque √©l√©ment du tableau, ajoutez une ligne dans votre table en appelant la fonction pr√©c√©demment cr√©√©e.

**Bonus 1** : Facebook n'affiche pas tous vos posts d'un coup (√ßa serait trop long et trop gourmand en termes de ressources pour votre navigateur). Il fait ce que l'on appelle de la [pagination](https://en.wikipedia.org/wiki/Pagination), dans notre exemple nous avons 1000 √©l√©ments : paginez ces √©l√©ments par groupe de 50.

**Bonus 2** : Faites un champ de recherche sur votre tableau afin de filter les √©l√©ments du tableau. Choisissez d'abord une colonne (par exemple le pr√©nom) avant de traiter toutes les colonnes.

**Bonus 3** : Ajoutez la possibilit√© de trier les lignes de votre tableau par ordre alphab√©tique.

**Bonus 4** : Faites un bouton avec un formulaire d'ajout d'une ligne dans votre tableau.

**Bonus 5** : Faites un bouton de suppression d'une ligne.

**Bingo 1** : Ajoutez la possibilit√© d'√©diter une ligne du tableau directement dans le tableau comme dans cet [exemple](https://editor.datatables.net/examples/inline-editing/simple).

**Bingo 2** : Ajoutez un bouton pour pouvoir faire un export CSV de votre tableau.

## Exercice 8 : Bienvenue dans le monde fabuleux des plugins jQuery

Un √©cosyst√®me de plugins jQuery que vous pouvez utiliser existe. Chaque plugin a sa propre documentation, qu'il faut visiter pour d√©couvrir comment l'utiliser.

Le chargement de plugins jQuery se fait en tout cas toujours de la m√™me fa√ßon : on t√©l√©charge le plugin sous forme de fichier `.js` √† minima, puis on l'int√®gre dans sa page en respectant l'ordre :
- Chargement de la librairie jQuery
- Chargment du plugin jQuery
- Chargement de notre script, qui contient les appels au plugin

L'objectif de cette partie est d'utiliser √† mimima un plugin jQuery, vous pouvez trouver la liste [ici](https://www.npmjs.com/browse/keyword/jquery-plugin) ou [l√†](https://plugins.jquery.com/).

Exemples de plugins :
- diaporama de photos
- slider en Javascript
- gestion de formulaire
- menu
- ...

**Bingo** : Recoder les plugins que vous avez choisis.

## Exercice 9 : Faire vivre son interface avec jQuery, mais sans plugin
Pour cet exercice, vous chargerez Bootstrap dans sa version CSS uniquement, sans le chargement de la biblioth√®que `bootstrap.js`. Vous utiliserez jQuery pour recr√©er ce que les composants simples de Bootstrap font, √† savoir principalement, ajouter et enlever des classes sur des √©l√©ments du DOM.
- Ajouter dans le fichier `index.html` le html n√©cessaire en le r√©cup√©rant de la documentation
- Faites dans un premier temps les comportements sans animation, puis ajoutez les animations
- Affichez plusieurs blocs : chaque bloc doit fonctionner ind√©pendament.

### Bootstrap Collapse
Reproduire [le comportement simple de Bootstrap Collapse avec un `href`](https://getbootstrap.com/docs/4.3/components/collapse/#example).

### Bootstrap Alert
Reproduire [le comportement de fermeture de Bootstrap Alert avec un bouton Close](https://getbootstrap.com/docs/4.3/components/alerts/#dismissing).

### Bootstrap Dropdown
Reproduire [le comportement d'affichage du Bootstrap Dropdown](https://getbootstrap.com/docs/4.3/components/dropdowns/#single-button)

### Affix
Dans la page, faire que toute la section "Your cart" reste fix√©e en haut de la fen√™tre quand le scroll d√©passe cette section.

## Exercice 10 : Extraire le template du projet Laravel

Dans le projet e-commerce en Laravel, vous avez travaill√© √† la construction de votre interface de boutique en ligne. Cette interface nous int√©resse et nous allons l'extraire du projet Laravel, pour pouvoir l'afficher hors d'un projet PHP, en statique. Pour cela, dans le dossier `/exo-10` :

- R√©cup√©rer les fichiers CSS du projet
- R√©cup√©rer, en enlevant toute la syntaxe Blade, la page HTML correspondant √† la page admin qui liste vos produits
- Nettoyer votre fichier CSS pour ne garder que les d√©clarations utiles √† cette page
- Am√©liorer cette page pour qu'elle soit responsive

HTML et CSS only !
